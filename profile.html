<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Perfil - ProNetwork</title>
    <link rel="stylesheet" href="/style.css" />
    <style>
        body {
            background: linear-gradient(180deg, #061226 0%, #0a1929 50%, #071a2a 100%);
        }

        .back-btn {
            position: fixed;
            top: 20px;
            left: 20px;
            z-index: 100;
            padding: 12px 20px;
            border-radius: 12px;
            background: rgba(255,255,255,0.05);
            border: 1px solid rgba(255,255,255,0.1);
            color: white;
            cursor: pointer;
            font-weight: 600;
            backdrop-filter: blur(10px);
            transition: all 0.3s;
        }

        .back-btn:hover {
            background: rgba(255,255,255,0.1);
            transform: translateX(-4px);
        }
    </style>
</head>
<body>
    <button class="back-btn" onclick="window.location.href='/feed.html'">‚Üê Volver al Feed</button>

    <header class="topbar">
        <div id="status" class="status">No conectado</div>
    </header>

    <main class="tarjeta vertical-card">
        <div class="foto">
            <img src="https://images.unsplash.com/photo-1507003211169-0a1dd7228f2d?w=400&h=400&fit=crop&crop=face" alt="Foto del trabajador" />
        </div>

        <div class="info">
            <div>
                <h1 class="nombre" id="nombre">Cargando...</h1>
                <h2 class="oficio" id="oficio">-</h2>
                <p class="experiencia">-</p>
                <p class="ubicacion">üìç -</p>
                <p class="contacto">üìû <span id="phone">-</span></p>
                <p class="email">‚úâÔ∏è <span id="email">-</span></p>
                
                <div class="pin-info">
                    <div class="pin-label">Tu PIN personal</div>
                    <div class="pin-value" id="myPin">00000000</div>
                </div>
                
                <button id="openChatBtn" class="btn-open-chat">Abrir chat</button>
            </div>
        </div>
    </main>

    <!-- Modales del chat (igual que index.html) -->
    <div id="connectOverlay" class="chat-overlay" aria-hidden="true">
        <div class="chat-card">
            <div class="chat-header">
                <div class="chat-profile">
                    <div class="chat-name">Conectar con otro usuario</div>
                    <div class="chat-sub">Introduce el PIN de 8 d√≠gitos</div>
                </div>
                <button id="closeConnectBtn" class="close-btn" aria-label="Cerrar">‚úï</button>
            </div>

            <div class="chat-body" style="min-height: 200px; display: flex; flex-direction: column; justify-content: center; align-items: center; gap: 16px;">
                <div style="width: 100%; max-width: 280px;">
                    <input id="remotePin" placeholder="PIN (8 d√≠gitos)" maxlength="8" inputmode="numeric" 
                           style="width: 100%; padding: 14px; font-size: 18px; text-align: center; letter-spacing: 3px; border-radius: 10px; border: 1px solid rgba(255,255,255,0.08); background: rgba(255,255,255,0.02); color: inherit;" />
                </div>
                <button id="connectBtn" style="padding: 14px 32px; border-radius: 10px; border: none; background: var(--accent-purple); color: white; cursor: pointer; font-weight: 600; font-size: 16px;">
                    Conectar
                </button>
                <button id="copyPinBtn" style="padding: 10px 20px; border-radius: 8px; border: 1px solid rgba(255,255,255,0.08); background: transparent; color: var(--muted); cursor: pointer; font-size: 14px;">
                    üìã Copiar mi PIN
                </button>
            </div>
        </div>
    </div>

    <div id="chatOverlay" class="chat-overlay" aria-hidden="true">
        <div class="chat-card">
            <div class="chat-header">
                <div class="chat-profile">
                    <div class="chat-name" id="chatName">Usuario</div>
                    <div class="chat-sub" id="chatSub">-</div>
                </div>
                <div class="chat-status">
                    <span id="led" class="led red" title="Estado: desconectado"></span>
                </div>
                <button id="closeChatBtn" class="close-btn" aria-label="Cerrar chat">‚úï</button>
            </div>

            <div class="chat-body">
                <div id="overlayMessages" class="messages"></div>
            </div>

            <div class="chat-footer">
                <input id="overlayInput" placeholder="Escribe un mensaje..." autocomplete="off" inputmode="text"/>
                <button id="overlaySend">Enviar</button>
            </div>
        </div>
    </div>

    <script src="/profile.js"></script>
    <script src="/app.js"></script>
</body>
</html>